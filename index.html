<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Putra Tools</title>
  <style>
    body {
      font-family: "Segoe UI", Arial, sans-serif;
      background: #0d1117;
      color: #eee;
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    .card {
      background: #161b22;
      padding: 25px;
      border-radius: 16px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.5);
      width: 350px;
      text-align: center;
      display: none;
      animation: fadeIn .4s ease;
    }
    .card.active { display: block; }
    input, button {
      width: 90%;
      padding: 10px;
      margin: 8px 0;
      border-radius: 6px;
      border: none;
    }
    input { background: #0d1117; color: #eee; border: 1px solid #333; }
    button { background: #238636; color: #fff; cursor: pointer; font-weight: bold; }
    button:hover { background: #2ea043; }
    h2 { margin-bottom: 15px; }
    pre {
      text-align: left;
      white-space: pre-wrap;
      background: #0d1117;
      color: #eee;
      padding: 10px;
      border-radius: 8px;
      max-height: 200px;
      overflow-y: auto;
    }
    @keyframes fadeIn { from {opacity:0; transform:translateY(10px);} to {opacity:1; transform:translateY(0);} }
  </style>
</head>
<body>
  <!-- Login -->
  <div id="loginCard" class="card active">
    <h2>üîë Login</h2>
    <input type="text" id="username" placeholder="Username"><br>
    <input type="password" id="password" placeholder="Password"><br>
    <button onclick="login()">Login</button>
  </div>

  <!-- Owner Dashboard -->
  <div id="ownerCard" class="card">
    <h2>üëë Owner Dashboard</h2>
    <button onclick="generateToken()">Generate Token Member</button>
    <p id="tokenResult"></p>
    <button onclick="showCard('trackerCard')">Tracker Link Generator</button>
    <button onclick="showCard('nikCard')">Lookup NIK</button>
    <button onclick="showCard('noCard')">Cek Nomor</button>
    <button onclick="logout()">Logout</button>
  </div>

  <!-- Member Dashboard -->
  <div id="memberCard" class="card">
    <h2>üë§ Member Dashboard</h2>
    <button onclick="showCard('trackerCard')">Tracker Link Generator</button>
    <button onclick="showCard('nikCard')">Lookup NIK</button>
    <button onclick="showCard('noCard')">Cek Nomor</button>
    <button onclick="logout()">Logout</button>
  </div>

  <!-- Tracker Generator -->
  <div id="trackerCard" class="card">
    <h2>üì° Tracker Generator</h2>
    <input type="text" id="redirectUrl" placeholder="Redirect URL (ex: https://google.com)">
    <button onclick="generateTracker()">Generate Link</button>
    <pre id="trackerResult"></pre>
    <button onclick="back()">‚¨Ö Kembali</button>
  </div>

  <!-- Lookup NIK -->
  <div id="nikCard" class="card">
    <h2>üÜî Lookup NIK</h2>
    <input type="text" id="nikInput" placeholder="Masukkan NIK">
    <button onclick="lookupNIK()">Cek</button>
    <pre id="nikResult"></pre>
    <button onclick="back()">‚¨Ö Kembali</button>
  </div>

  <!-- Cek Nomor -->
  <div id="noCard" class="card">
    <h2>üì± Cek Nomor HP</h2>
    <input type="text" id="noInput" placeholder="08xxxxxxxxxx">
    <button onclick="cekNo()">Cek</button>
    <pre id="noResult"></pre>
    <button onclick="back()">‚¨Ö Kembali</button>
  </div>

  <!-- Tracker Page -->
  <div id="trackerPage" class="card">
    <h2>üìä Data Tracker</h2>
    <pre id="trackerData"></pre>
    <button onclick="goRedirect()">‚û° Lanjut ke Redirect</button>
  </div>

<script>
let role=null, memberToken="member123", redirectTarget="";

// login
function login(){
  const u=document.getElementById("username").value;
  const p=document.getElementById("password").value;
  if(u==="putraxyofficial12354" && p==="1234"){ role="owner"; showCard("ownerCard"); }
  else if(u==="member" && p===memberToken){ role="member"; showCard("memberCard"); }
  else alert("Login gagal");
}

function logout(){ role=null; showCard("loginCard"); }

function showCard(id){
  document.querySelectorAll(".card").forEach(c=>c.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

function back(){
  if(role==="owner") showCard("ownerCard"); else showCard("memberCard");
}

function generateToken(){
  memberToken=Math.random().toString(36).substring(2,8);
  document.getElementById("tokenResult").innerText="Token Member: "+memberToken;
}

function generateTracker(){
  const url=document.getElementById("redirectUrl").value||"https://google.com";
  const link=window.location.href.split("#")[0]+"#tracker?redirect="+encodeURIComponent(url);
  document.getElementById("trackerResult").innerText=link;
}

function lookupNIK(){
  const nik=document.getElementById("nikInput").value;
  if(nik.length<8){document.getElementById("nikResult").innerText="NIK tidak valid";return;}
  const lahir="200"+nik[6]+"-"+nik[4]+nik[5]+"-"+nik[2]+nik[3];
  const gender=parseInt(nik[6])%2===0?"Laki-laki":"Perempuan";
  const kota="Kota "+nik.substring(0,2);
  document.getElementById("nikResult").innerText=`Tanggal Lahir: ${lahir}\nJenis Kelamin: ${gender}\nKota: ${kota}`;
}

function cekNo(){
  const no=document.getElementById("noInput").value;
  let provider="Tidak dikenal";
  if(no.startsWith("0812")) provider="Telkomsel";
  else if(no.startsWith("0857")) provider="Indosat";
  else if(no.startsWith("0838")) provider="Axis";
  const aktif=no.length>=10?"Aktif":"Tidak Aktif";
  document.getElementById("noResult").innerText=`Provider: ${provider}\nStatus: ${aktif}`;
}

function collectDevice(){
  return {
    userAgent:navigator.userAgent,
    platform:navigator.platform,
    language:navigator.language,
    screen:screen.width+"x"+screen.height,
    window:window.innerWidth+"x"+window.innerHeight,
    online:navigator.onLine,
    cookies:navigator.cookieEnabled,
    timezone:Intl.DateTimeFormat().resolvedOptions().timeZone
  };
}

function showTrackerPage(){
  showCard("trackerPage");
  const d=collectDevice();
  document.getElementById("trackerData").innerText=JSON.stringify(d,null,2);
}

function goRedirect(){window.location.href=redirectTarget;}

window.onload=()=>{
  if(location.hash.startsWith("#tracker")){
    const url=new URLSearchParams(location.hash.split("?")[1]);
    redirectTarget=url.get("redirect")||"https://google.com";
    showTrackerPage();
  }
};
</script>
</body>
</html>    <button onclick="backDashboard()">Kembali</button>
  </div>

  <!-- Cek Nomor -->
  <div id="cekNo" class="box hidden">
    <h3>üì± Cek Nomor</h3>
    <input type="text" id="noInput" placeholder="Masukkan Nomor HP">
    <button onclick="cekNomor()">Cek</button>
    <pre id="noResult"></pre>
    <button onclick="backDashboard()">Kembali</button>
  </div>

  <!-- Tracker Generator -->
  <div id="tracker" class="box hidden">
    <h3>üåê Tracker Link Generator</h3>
    <input type="text" id="redirectUrl" placeholder="Masukkan link tujuan (https://...)">
    <button onclick="makeTrackerLink()">Buat Link Tracker</button>
    <textarea id="trackerLink" readonly></textarea>
    <h4>Log Pengunjung:</h4>
    <pre id="trackerLog"></pre>
    <button onclick="backDashboard()">Kembali</button>
  </div>

<script>
  let currentUser = null;
  let validToken = null;
  let visitorLogs = [];

  // ==== LOGIN SYSTEM ====
  function showOwnerLogin(){ hideAll(); document.getElementById("loginOwner").classList.remove("hidden"); }
  function showMemberLogin(){ hideAll(); document.getElementById("loginMember").classList.remove("hidden"); }
  function backToMenu(){ hideAll(); document.getElementById("menuAwal").classList.remove("hidden"); }

  function loginOwner(){
    const user = document.getElementById("ownerUser").value;
    const pass = document.getElementById("ownerPass").value;
    if(user === "owner" && pass === "1234"){
      currentUser = "owner";
      hideAll();
      document.getElementById("dashboardOwner").classList.remove("hidden");
    } else { alert("Login Owner gagal!"); }
  }

  function loginMember(){
    const token = document.getElementById("memberToken").value;
    if(token && token === validToken){
      currentUser = "member";
      hideAll();
      document.getElementById("dashboardMember").classList.remove("hidden");
    } else { alert("Token salah atau belum dibuat!"); }
  }

  function logout(){
    currentUser = null;
    hideAll();
    document.getElementById("menuAwal").classList.remove("hidden");
  }

  function generateToken(){
    validToken = Math.random().toString(36).substring(2,10).toUpperCase();
    document.getElementById("tokenBox").innerHTML = "<b>Token Member:</b> " + validToken;
  }

  // ==== DASHBOARD ====
  function showLookupNIK(){ hideAll(); document.getElementById("lookupNIK").classList.remove("hidden"); }
  function showCekNo(){ hideAll(); document.getElementById("cekNo").classList.remove("hidden"); }
  function showTracker(){
    hideAll(); 
    document.getElementById("tracker").classList.remove("hidden"); 
    updateLog();
  }

  function backDashboard(){
    hideAll();
    if(currentUser === "owner"){ document.getElementById("dashboardOwner").classList.remove("hidden"); }
    else if(currentUser === "member"){ document.getElementById("dashboardMember").classList.remove("hidden"); }
  }

  function hideAll(){ document.querySelectorAll(".box").forEach(b=>b.classList.add("hidden")); }

  // ==== LOOKUP NIK ====
  function lookupNIK(){
    const nik = document.getElementById("nikInput").value;
    if(!/^\d{16}$/.test(nik)){ alert("NIK harus 16 digit angka!"); return; }
    const tgl = nik.substring(6,8);
    const bln = nik.substring(8,10);
    const thn = nik.substring(10,12);
    let gender = "Laki-Laki"; let tanggal = parseInt(tgl);
    if(tanggal>40){ gender="Perempuan"; tanggal -= 40; }
    const tahun = "19"+thn; // asumsi 1900-an
    const kota = nik.substring(0,4);
    document.getElementById("nikResult").innerText =
      "Tanggal Lahir: "+tanggal+"/"+bln+"/"+tahun+
      "\nJenis Kelamin: "+gender+
      "\nKode Kota: "+kota;
  }

  // ==== CEK NOMOR ====
  const providerMap = {
    "0811":"Telkomsel","0812":"Telkomsel","0857":"Indosat","0856":"Indosat","0838":"Axis","0896":"Tri","0881":"Smartfren"
  };
  function cekNomor(){
    const no = document.getElementById("noInput").value;
    const prefix = no.substring(0,4);
    let provider = providerMap[prefix] || "Tidak diketahui";
    let aktif = (parseInt(no.slice(-1)) % 2 === 0) ? "Aktif" : "Tidak Aktif";
    document.getElementById("noResult").innerText =
      "Provider: "+provider+"\nStatus: "+aktif;
  }

  // ==== TRACKER LINK ====
  function makeTrackerLink(){
    const redirectUrl = document.getElementById("redirectUrl").value;
    if(!redirectUrl.startsWith("http")){ alert("Link tujuan harus diawali http atau https"); return; }
    const link = window.location.origin + window.location.pathname + "?track=" + Date.now() + "&to=" + encodeURIComponent(redirectUrl);
    document.getElementById("trackerLink").value = link;
  }

  function updateLog(){
    let logText = visitorLogs.map(v => 
      `Time: ${v.time}
UA: ${v.ua}
Platform: ${v.platform}
Screen: ${v.screen}
Redirected to: ${v.redirect}
-------------------------`).join("\n");
    document.getElementById("trackerLog").innerText = logText || "Belum ada pengunjung.";
  }

  // ==== TRACKER MODE ====
  function collectVisitor(){
    const url = new URL(window.location.href);
    if(url.searchParams.has("track")){
      const redirect = url.searchParams.get("to") || "https://example.com";
      const v = {
        time: new Date().toLocaleString(),
        ua: navigator.userAgent,
        platform: navigator.platform,
        screen: screen.width+"x"+screen.height,
        redirect: redirect
      };
      visitorLogs.push(v);
      setTimeout(()=>{ window.location.href = redirect; },2000);
    }
  }
  collectVisitor();
</script>
</body>
</html>  <!-- Tracker -->
  <div id="tracker" class="box hidden">
    <h3>Tracker Link Generator</h3>
    <input type="text" id="targetUrl" placeholder="https://example.com">
    <button onclick="generateTracker()">Generate</button>
    <p id="generatedLink"></p>
    <h4>Log Tracking</h4>
    <pre id="logBox">Belum ada data...</pre>
  </div>

  <script>
    const OWNER_PASSWORD = "admin123"; 
    let tokens = JSON.parse(localStorage.getItem("tokens") || "[]");

    // === Data wilayah minimal (kode provinsi 2 digit) ===
    const wilayah = {
      "12": "Sumatera Utara",
      "31": "DKI Jakarta",
      "32": "Jawa Barat",
      "33": "Jawa Tengah",
      "34": "DI Yogyakarta",
      "35": "Jawa Timur",
      "36": "Banten",
      "51": "Bali"
    };

    // === Prefix provider ===
    const provider = {
      "0811":"Telkomsel","0812":"Telkomsel","0813":"Telkomsel","0821":"Telkomsel","0822":"Telkomsel","0823":"Telkomsel",
      "0852":"Telkomsel","0853":"Telkomsel","0851":"Telkomsel",
      "0855":"Indosat","0856":"Indosat","0857":"Indosat","0858":"Indosat","0814":"Indosat","0815":"Indosat","0816":"Indosat",
      "0817":"XL","0818":"XL","0819":"XL","0859":"XL","0877":"XL","0878":"XL",
      "0831":"Axis","0832":"Axis","0833":"Axis","0838":"Axis",
      "0895":"Tri","0896":"Tri","0897":"Tri","0898":"Tri","0899":"Tri",
      "0881":"Smartfren","0882":"Smartfren","0883":"Smartfren","0884":"Smartfren","0885":"Smartfren","0886":"Smartfren","0887":"Smartfren","0888":"Smartfren","0889":"Smartfren"
    };

    // === Login ===
    function login() {
      const type = document.getElementById("loginType").value;
      const input = document.getElementById("loginInput").value.trim();

      if (type === "owner") {
        if (input === OWNER_PASSWORD) {
          sessionStorage.setItem("role", "owner");
          showDashboard();
        } else alert("Password salah!");
      } else {
        if (tokens.includes(input)) {
          sessionStorage.setItem("role", "member");
          showDashboard();
        } else alert("Token tidak valid!");
      }
    }

    function logout() {
      sessionStorage.removeItem("role");
      location.reload();
    }

    function showDashboard() {
      document.getElementById("loginBox").classList.add("hidden");
      let role = sessionStorage.getItem("role");
      if (role === "owner") document.getElementById("ownerBox").classList.remove("hidden");
      if (role === "member") document.getElementById("memberBox").classList.remove("hidden");
    }

    // === Token ===
    function generateToken() {
      const token = "TOKEN-" + Math.random().toString(36).substr(2,8).toUpperCase();
      tokens.push(token);
      localStorage.setItem("tokens", JSON.stringify(tokens));
      showTokens();
    }

    function showTokens() {
      document.getElementById("tokenList").innerText = tokens.length ? tokens.join("\n") : "Belum ada token...";
    }

    // === Lookup NIK (parser resmi) ===
    function lookupNik() {
      const nik = document.getElementById("nikInput").value.trim();
      if (!/^\d{16}$/.test(nik)) {
        alert("NIK harus 16 digit angka!");
        return;
      }
      let kodeProv = nik.substring(0,2);
      let provinsi = wilayah[kodeProv] || "Tidak diketahui";

      let tgl = parseInt(nik.substring(6,8),10);
      let bln = parseInt(nik.substring(8,10),10);
      let thn = parseInt(nik.substring(10,12),10);

      let gender = "Laki-laki";
      if (tgl > 40) { gender = "Perempuan"; tgl -= 40; }

      let tahunFull = thn < 25 ? 2000+thn : 1900+thn;
      let tanggalLahir = `${tgl.toString().padStart(2,"0")}-${bln.toString().padStart(2,"0")}-${tahunFull}`;

      document.getElementById("nikResult").innerText =
        `NIK: ${nik}\nTanggal Lahir: ${tanggalLahir}\nJenis Kelamin: ${gender}\nProvinsi: ${provinsi}`;
    }

    // === Cek Nomor ===
    function cekNomor() {
      const no = document.getElementById("noInput").value.trim();
      if (!/^\d{10,13}$/.test(no)) {
        alert("Masukkan nomor yang benar (10-13 digit)!");
        return;
      }
      let prefix = no.substring(0,4);
      let kartu = provider[prefix] || "Tidak diketahui";

      let status = (parseInt(no.slice(-1)) % 2 === 0) ? "Aktif" : "Tidak Aktif";

      document.getElementById("noResult").innerText =
        `Nomor: ${no}\nJenis Kartu: ${kartu}\nStatus: ${status}`;
    }

    // === Tracker ===
    function generateTracker() {
      let url = document.getElementById("targetUrl").value.trim();
      if (!url) return alert("Masukkan URL!");
      let trackerUrl = window.location.href.split("?")[0] + "?redirect=" + encodeURIComponent(url);
      document.getElementById("generatedLink").innerHTML =
        `Link Tracker: <a href="${trackerUrl}" target="_blank">${trackerUrl}</a>`;
    }

    async function getDeviceInfo(target) {
      return {
        url: target,
        user_agent: navigator.userAgent,
        platform: navigator.platform,
        screen: `${screen.width}x${screen.height}`,
        window: `${window.innerWidth}x${window.innerHeight}`,
        time: new Date().toLocaleString()
      };
    }

    function saveLog(info) {
      let logs = JSON.parse(localStorage.getItem("trackerLogs") || "[]");
      logs.push(info);
      localStorage.setItem("trackerLogs", JSON.stringify(logs));
    }

    function showLogs() {
      let logs = JSON.parse(localStorage.getItem("trackerLogs") || "[]");
      document.getElementById("logBox").innerText = logs.length
        ? logs.map((v,i)=>`[${i+1}] ${v.time}\nUA: ${v.user_agent}\nPlatform: ${v.platform}\nScreen: ${v.screen}\nWindow: ${v.window}\nRedirect: ${v.url}\n---`).join("\n")
        : "Belum ada data...";
    }

    const params = new URLSearchParams(window.location.search);
    if (params.has("redirect")) {
      let target = params.get("redirect");
      getDeviceInfo(target).then(info=>{
        saveLog(info);
        showLogs();
        setTimeout(()=>{ window.location.href = target; },1500);
      });
    } else {
      showLogs();
      showTokens();
      if (sessionStorage.getItem("role")) showDashboard();
    }

    function showSection(id) {
      ["lookupnik","cekno","tracker"].forEach(s=>document.getElementById(s).classList.add("hidden"));
      document.getElementById(id).classList.remove("hidden");
    }
  </script>
</body>
</html>
